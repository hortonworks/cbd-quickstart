This repo helps to automate the deployment of Cloudbreak Deployer. On other cloud providers you can create “public images”, while on Azure
its a different process. You have to create a publicly available virtual disk image (vhdi), which has to be downloaded and imported
into a storage account. Our experience shows that it takes about 30-60 minutes until you can log into the VM.

For Azure we have an alternative approach:
- start from official CentOS, so no image copy is needed
- use [Docker VM Extension](https://github.com/Azure/azure-docker-extension) to install Docker
- use [CustomScript Extension](https://github.com/Azure/azure-linux-extensions/tree/master/CustomScript) to install Cloudbreak Deployer (cbd)

## Deploy 2.11.0-dev.33 via Azure web UI

Click here: <a href="https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2Fhortonworks%2Fcbd-quickstart%2F2.11.0-dev.33%2Fazure%2FmainTemplate.json">  ![deploy on azure](http://azuredeploy.net/deploybutton.png) </a>

# Image versions of Azure templates
## List the latest available CentOS images
> We are using the latest CentOS based images with cloud-init (CI). The `list-latest-images` make phase requires the Azure command line interface to be installed and configured in you machine.
```
 make list-latest-images
```
## List the version of the configured CentOS image
```
make echo_version
```
## Update the image version in the generated templates
The version of the image in the generated template is configured as an environment variable in the Makefile. To update only the current value of the following variable needs to be overridden with the desired version in the Makefile.
```
export OS_IMAGE_SKU_VERSION=7.4.20180417
```
After updating the image version the templates needs to be regenerated by running the `make build` command to get the ARM template with the updated image version.

